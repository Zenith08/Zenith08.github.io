[{"name":"/#Supabase Prefab/Supabase Prefab/Pages/Log in","nodes":[{"id":"5ef5099b-fa3a-ef4b-539b-a336b7548304","type":"Page","parameters":{},"ports":[],"children":[{"id":"ec1db06e-1898-e2a2-bb83-41f91e20a93a","type":"Group","parameters":{"rowGap":{"value":32,"unit":"px"}},"ports":[],"children":[{"id":"1da32fe1-0c1e-d9bd-3682-6d522f855f75","type":"Group","parameters":{"flexDirection":"column","backgroundColor":"#FFFFFF","borderRadius":{"value":8,"unit":"px"},"sizeMode":"contentHeight","clip":true},"ports":[],"children":[{"id":"bf6c1812-d6e9-41e4-550c-5bda610d5d41","type":"Text","parameters":{"text":"Log in page","marginBottom":{"value":16,"unit":"px"}},"ports":[],"children":[]},{"id":"e2c08a85-14eb-4b4e-7d52-96e39142a28f","type":"net.noodl.controls.textinput","parameters":{"label":"Email","type":"email","placeholder":"Enter your email","marginBottom":{"value":8,"unit":"px"}},"ports":[],"children":[]},{"id":"25f07fb0-e9c8-6f36-3435-61d5b6fcffcc","type":"net.noodl.controls.textinput","parameters":{"label":"Email","type":"password","placeholder":"","marginBottom":{"value":8,"unit":"px"},"startValue":"Password"},"ports":[],"children":[]},{"id":"8a7de477-ed77-1932-e54d-a4d84dcea64b","type":"net.noodl.controls.button","parameters":{"label":"Log in"},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"children":[]},{"id":"5a07f4ab-321f-7caa-f9a8-bec49f64d50e","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":16,"unit":"px"},"sizeMode":"contentHeight","alignItems":"center","marginTop":{"value":16,"unit":"px"}},"ports":[],"children":[{"id":"49b186b2-9cc1-2581-c987-8ed665d4786d","type":"Text","parameters":{"text":"Don't have an account?","sizeMode":"contentSize","marginTop":{"value":0,"unit":"px"},"color":"Grey - 600"},"ports":[],"children":[]},{"id":"78c93f6e-4f98-081c-6596-cd52af5b12ab","type":"net.noodl.controls.button","variant":"Text Button","parameters":{},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"children":[]}]}]},{"id":"60f50523-b862-84c1-6444-1cccbc87d76b","type":"Group","parameters":{"rowGap":{"value":8,"unit":"px"},"mounted":false},"ports":[],"children":[{"id":"671de009-2420-7e56-4cca-c9a274563045","type":"Text","parameters":{"textStyle":"Title Medium","text":"Resend confirmation"},"ports":[],"children":[]},{"id":"e440612d-0d35-15e3-9ede-2c6f4fd8bf44","type":"Text","parameters":{"text":"It looks like you've signed up but haven't confirmed your email address. Should we resend you a confirmation email?","color":"Grey - 600"},"ports":[],"children":[]},{"id":"3bc62482-ad54-b67b-2c33-a2fb57f921fb","type":"net.noodl.controls.button","parameters":{"label":"Resend","marginTop":{"value":32,"unit":"px"}},"ports":[],"children":[]}]},{"id":"3c880723-eb3c-8bf6-443f-ad040647c5a7","type":"Group","parameters":{"rowGap":{"value":8,"unit":"px"},"mounted":false},"ports":[],"children":[{"id":"aaa75d80-af95-8f19-a9b6-523c3e9c9987","type":"Text","parameters":{"textStyle":"Title Medium","text":"Invalid credentials"},"ports":[],"children":[]},{"id":"76c39268-73aa-7097-b044-19b22acec98b","type":"Text","parameters":{"text":"Provided incorrect email or password","color":"Grey - 600"},"ports":[],"children":[]},{"id":"ef508c85-5a13-b71e-5334-d55f5cd846b8","type":"net.noodl.controls.button","parameters":{"label":"Retry","marginTop":{"value":32,"unit":"px"}},"ports":[],"children":[]}]}]}]},{"id":"48fb4573-6cd5-a609-6f66-4c34a5cdbad6","type":"PageInputs","parameters":{},"ports":[],"children":[]},{"id":"b7684adb-b9ac-1c9f-5dca-df8d2fce4590","type":"RouterNavigate","parameters":{"router":"Supabase Not Logged In Router","target":"/#Supabase Prefab/Supabase Prefab/Pages/Sign up"},"ports":[],"children":[]},{"id":"9f94d93b-2192-3ee0-b56d-b8b188cebd6a","type":"/#Supabase Prefab/Supabase Prefab/User/Supabase - Log In","parameters":{},"ports":[],"children":[]},{"id":"3e173951-a3e5-3127-3508-cad40319a49c","type":"/#Supabase Prefab/Supabase Prefab/User/Supabase - Resend Confirmation","parameters":{},"ports":[],"children":[]},{"id":"ecf28d98-55ab-65c9-64ab-156736551a32","type":"/#Supabase Prefab/Supabase Prefab/User/Supabase - Fetch Current User Auth","parameters":{"Loggin In ?":true},"ports":[],"children":[]},{"id":"bdef565f-6c14-e691-772b-aca16a506e8c","type":"States","parameters":{"states":"400,402,401,200","values":"Confirm email group visibility,Login form group visibility,Invalid Credentials Group Visibility","type-Confirm email group visibility":"boolean","type-Login form group visibility":"boolean","useTransitions":false,"value-400-Login form group visibility":false,"value-401-Login form group visibility":false,"value-402-Confirm email group visibility":true,"value-402-Login form group visibility":false,"type-Invalid Credentials Group Visibility":"boolean","value-401-Invalid Credentials Group Visibility":true,"value-200-Login form group visibility":true,"value-400-Invalid Credentials Group Visibility":true,"currentState":"200"},"ports":[],"children":[]},{"id":"3e2e5eaf-2eb9-2fe8-fbd3-ee1d3f2d4d14","type":"Expression","parameters":{"expression":"error == \"400\""},"ports":[],"children":[]},{"id":"b390af22-6afa-3b9c-f0b6-2df4822793cb","type":"Expression","parameters":{"expression":"error == \"401\""},"ports":[],"children":[]},{"id":"d3e78de7-abec-77cc-d78f-5d4ac86cfbc7","type":"Expression","parameters":{"expression":"error == \"402\""},"ports":[],"children":[]},{"id":"34c8aa48-4186-ae6a-53a3-54795ea8f87b","type":"/#Supabase Prefab/Supabase Prefab/User/Supabase - Fetch Current User Profile Data","parameters":{},"ports":[],"children":[]},{"id":"adbae879-2fa6-8204-b432-437efa05ce95","type":"/#Supabase Prefab/Supabase Prefab/User/Supabase - Update Current User Profile Data","parameters":{},"ports":[],"children":[]},{"id":"d4ea8b0f-7c53-d3cf-1f80-1c805cff6622","type":"JavaScriptFunction","parameters":{"functionScript":"Outputs.data = {id:Noodl.Objects.currentUser.auth.id}\nOutputs.Done()"},"ports":[{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"31315dfd-f9f8-3c90-9e83-360c61fb0478","type":"RouterNavigate","parameters":{"router":"Supabase Logged In Router","target":"/#Supabase Prefab/Supabase Prefab/Pages/Logged in"},"ports":[],"children":[]}],"connections":[{"sourceId":"8a7de477-ed77-1932-e54d-a4d84dcea64b","sourcePort":"onClick","targetId":"9f94d93b-2192-3ee0-b56d-b8b188cebd6a","targetPort":"Do"},{"sourceId":"3bc62482-ad54-b67b-2c33-a2fb57f921fb","sourcePort":"onClick","targetId":"3e173951-a3e5-3127-3508-cad40319a49c","targetPort":"Do"},{"sourceId":"bdef565f-6c14-e691-772b-aca16a506e8c","sourcePort":"Login form group visibility","targetId":"1da32fe1-0c1e-d9bd-3682-6d522f855f75","targetPort":"mounted"},{"sourceId":"bdef565f-6c14-e691-772b-aca16a506e8c","sourcePort":"Confirm email group visibility","targetId":"60f50523-b862-84c1-6444-1cccbc87d76b","targetPort":"mounted"},{"sourceId":"bdef565f-6c14-e691-772b-aca16a506e8c","sourcePort":"Invalid Credentials Group Visibility","targetId":"3c880723-eb3c-8bf6-443f-ad040647c5a7","targetPort":"mounted"},{"sourceId":"ef508c85-5a13-b71e-5334-d55f5cd846b8","sourcePort":"onClick","targetId":"bdef565f-6c14-e691-772b-aca16a506e8c","targetPort":"to-200"},{"sourceId":"3e2e5eaf-2eb9-2fe8-fbd3-ee1d3f2d4d14","sourcePort":"isTrueEv","targetId":"bdef565f-6c14-e691-772b-aca16a506e8c","targetPort":"to-400"},{"sourceId":"b390af22-6afa-3b9c-f0b6-2df4822793cb","sourcePort":"isTrueEv","targetId":"bdef565f-6c14-e691-772b-aca16a506e8c","targetPort":"to-401"},{"sourceId":"d3e78de7-abec-77cc-d78f-5d4ac86cfbc7","sourcePort":"isTrueEv","targetId":"bdef565f-6c14-e691-772b-aca16a506e8c","targetPort":"to-402"},{"sourceId":"9f94d93b-2192-3ee0-b56d-b8b188cebd6a","sourcePort":"Failure","targetId":"3e2e5eaf-2eb9-2fe8-fbd3-ee1d3f2d4d14","targetPort":"run"},{"sourceId":"9f94d93b-2192-3ee0-b56d-b8b188cebd6a","sourcePort":"Failure","targetId":"b390af22-6afa-3b9c-f0b6-2df4822793cb","targetPort":"run"},{"sourceId":"9f94d93b-2192-3ee0-b56d-b8b188cebd6a","sourcePort":"Failure","targetId":"d3e78de7-abec-77cc-d78f-5d4ac86cfbc7","targetPort":"run"},{"sourceId":"d4ea8b0f-7c53-d3cf-1f80-1c805cff6622","sourcePort":"out-Done","targetId":"adbae879-2fa6-8204-b432-437efa05ce95","targetPort":"Do"},{"sourceId":"e2c08a85-14eb-4b4e-7d52-96e39142a28f","sourcePort":"onTextChanged","targetId":"9f94d93b-2192-3ee0-b56d-b8b188cebd6a","targetPort":"Email"},{"sourceId":"25f07fb0-e9c8-6f36-3435-61d5b6fcffcc","sourcePort":"onTextChanged","targetId":"9f94d93b-2192-3ee0-b56d-b8b188cebd6a","targetPort":"Password"},{"sourceId":"e2c08a85-14eb-4b4e-7d52-96e39142a28f","sourcePort":"onTextChanged","targetId":"3e173951-a3e5-3127-3508-cad40319a49c","targetPort":"Email"},{"sourceId":"9f94d93b-2192-3ee0-b56d-b8b188cebd6a","sourcePort":"Error","targetId":"3e2e5eaf-2eb9-2fe8-fbd3-ee1d3f2d4d14","targetPort":"error"},{"sourceId":"9f94d93b-2192-3ee0-b56d-b8b188cebd6a","sourcePort":"Error","targetId":"b390af22-6afa-3b9c-f0b6-2df4822793cb","targetPort":"error"},{"sourceId":"9f94d93b-2192-3ee0-b56d-b8b188cebd6a","sourcePort":"Error","targetId":"d3e78de7-abec-77cc-d78f-5d4ac86cfbc7","targetPort":"error"},{"sourceId":"9f94d93b-2192-3ee0-b56d-b8b188cebd6a","sourcePort":"Success","targetId":"ecf28d98-55ab-65c9-64ab-156736551a32","targetPort":"Do"},{"sourceId":"34c8aa48-4186-ae6a-53a3-54795ea8f87b","sourcePort":"No User Data","targetId":"d4ea8b0f-7c53-d3cf-1f80-1c805cff6622","targetPort":"run"},{"sourceId":"d4ea8b0f-7c53-d3cf-1f80-1c805cff6622","sourcePort":"out-data","targetId":"adbae879-2fa6-8204-b432-437efa05ce95","targetPort":"Data"},{"sourceId":"ecf28d98-55ab-65c9-64ab-156736551a32","sourcePort":"Done","targetId":"34c8aa48-4186-ae6a-53a3-54795ea8f87b","targetPort":"Do"},{"sourceId":"34c8aa48-4186-ae6a-53a3-54795ea8f87b","sourcePort":"Success","targetId":"31315dfd-f9f8-3c90-9e83-360c61fb0478","targetPort":"navigate"},{"sourceId":"adbae879-2fa6-8204-b432-437efa05ce95","sourcePort":"Success","targetId":"31315dfd-f9f8-3c90-9e83-360c61fb0478","targetPort":"navigate"},{"sourceId":"78c93f6e-4f98-081c-6596-cd52af5b12ab","sourcePort":"onClick","targetId":"b7684adb-b9ac-1c9f-5dca-df8d2fce4590","targetPort":"navigate"}],"ports":[],"roots":["5ef5099b-fa3a-ef4b-539b-a336b7548304"]},{"name":"/#Supabase Prefab/Supabase Prefab/User/Supabase - Log In","nodes":[{"id":"5019a3ba-a68a-ced1-ac8d-5357da62dd33","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"38965242-ccd0-b4f0-8efe-175615c5f106","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"e1d1522d-8e6d-b6f2-2487-092ba1e66582","type":"JavaScriptFunction","parameters":{"functionScript":"//console.clear()\n\nif (!Boolean(Noodl.Variables.supabase)){\n    console.error(\"Supabase client not initialized\")\n    return\n}\n\nlet { data, error } = await Noodl.Variables.supabase.auth.signInWithPassword({\n  email: Inputs.email,\n  password: Inputs.password,\n})\n\nif (error) {\n\n  Noodl.Objects.currentUser.loggedIn = false\n\n  switch (error.message) {\n    case \"Invalid login credentials\":\n      Outputs.error = \"401\"\n      break;\n    case \"Email not confirmed\":\n      Outputs.error = \"402\"\n      break;\n    default:\n      Outputs.error = \"400\"\n\n  }\n  console.error(\"[log in] error: \", error)\n  Outputs.Failure()\n\n} else {\n\n  Outputs.data = data\n  Outputs.error = \"200\"\n  Noodl.Objects.currentUser.loggedIn = true\n  Noodl.Objects.currentUser.auth = data.user\n  Noodl.Objects.currentUser.session = data.session\n  //data.session.user.sbid = data.session.user.id\n  //Noodl.Objects.currentUser.setAll(data)\n\n  Outputs.Success()\n\n}"},"ports":[{"name":"in-email","displayName":"email","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-password","displayName":"password","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":9}],"children":[]},{"id":"51939637-cc01-175a-0871-aae5eb192d0e","type":"Event Sender","parameters":{"channelName":"Supabase User Logged In"},"ports":[],"children":[]}],"connections":[{"sourceId":"5019a3ba-a68a-ced1-ac8d-5357da62dd33","sourcePort":"Do","targetId":"e1d1522d-8e6d-b6f2-2487-092ba1e66582","targetPort":"run"},{"sourceId":"5019a3ba-a68a-ced1-ac8d-5357da62dd33","sourcePort":"Email","targetId":"e1d1522d-8e6d-b6f2-2487-092ba1e66582","targetPort":"in-email"},{"sourceId":"5019a3ba-a68a-ced1-ac8d-5357da62dd33","sourcePort":"Password","targetId":"e1d1522d-8e6d-b6f2-2487-092ba1e66582","targetPort":"in-password"},{"sourceId":"e1d1522d-8e6d-b6f2-2487-092ba1e66582","sourcePort":"out-Failure","targetId":"38965242-ccd0-b4f0-8efe-175615c5f106","targetPort":"Failure"},{"sourceId":"e1d1522d-8e6d-b6f2-2487-092ba1e66582","sourcePort":"out-error","targetId":"38965242-ccd0-b4f0-8efe-175615c5f106","targetPort":"Error"},{"sourceId":"e1d1522d-8e6d-b6f2-2487-092ba1e66582","sourcePort":"out-Success","targetId":"38965242-ccd0-b4f0-8efe-175615c5f106","targetPort":"Success"},{"sourceId":"e1d1522d-8e6d-b6f2-2487-092ba1e66582","sourcePort":"out-Success","targetId":"51939637-cc01-175a-0871-aae5eb192d0e","targetPort":"sendEvent"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"Email","type":"*","group":"Inputs","plug":"input","index":1},{"name":"Data","type":"*","plug":"output","index":2},{"name":"Password","type":"*","group":"Inputs","plug":"input","index":2},{"name":"Error","type":"*","plug":"output","index":3}],"roots":[]}]