[{"name":"/#Supabase Prefab/Supabase Prefab/User/Supabase - Fetch Current User Auth","nodes":[{"id":"a2a4a8c4-4b63-41f6-f6cb-3309ea0ba1fb","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"95c030a5-ed16-5159-fe2c-2211d621c05c","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"e9b3244f-5bbd-1312-8c86-515ee056b452","type":"JavaScriptFunction","parameters":{"functionScript":"if (!Boolean(Noodl.Variables.supabase)) {\n  console.error(\"Supabase client is not initialized\")\n  return\n}\n\nconst {data, error} = await Noodl.Variables.supabase.auth.getSession()\nconsole.log(\"data.session\", data.session)\n\nif (data.session) {\n  Noodl.Objects.currentUser.auth = data.session.user\n  Noodl.Objects.currentUser.session = data.session\n\n  Outputs.loggedIn = Boolean(data.session)\n} else {\n  Outputs.loggedIn = false\n}\n\nOutputs.Done()","scriptOutputs":[{"id":"dffg","label":"loggedIn"}],"outtype-loggedIn":"boolean"},"ports":[{"name":"outtype-loggedIn","displayName":"Type","editorName":"loggedIn | Type","plug":"input","type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"boolean","label":"Boolean"},{"value":"number","label":"Number"},{"value":"object","label":"Object"},{"value":"date","label":"Date"},{"value":"array","label":"Array"},{"value":"color","label":"Color"},{"value":"signal","label":"Signal"}],"allowEditOnly":true},"default":"string","parent":"scriptOutputs","parentItemId":"dffg","index":4},{"name":"out-loggedIn","displayName":"loggedIn","plug":"output","type":"boolean","group":"Outputs","index":5},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":6}],"children":[]},{"id":"e0196949-22e1-0d3a-69a5-a488dbc20ab6","type":"SetModelProperties","parameters":{"modelId":"currentUser","properties":"loggedIn","type-loggedIn":"boolean","type-emailConfirmed":"boolean"},"ports":[],"children":[]}],"connections":[{"sourceId":"a2a4a8c4-4b63-41f6-f6cb-3309ea0ba1fb","sourcePort":"Do","targetId":"e9b3244f-5bbd-1312-8c86-515ee056b452","targetPort":"run"},{"sourceId":"e9b3244f-5bbd-1312-8c86-515ee056b452","sourcePort":"out-loggedIn","targetId":"e0196949-22e1-0d3a-69a5-a488dbc20ab6","targetPort":"prop-loggedIn"},{"sourceId":"e0196949-22e1-0d3a-69a5-a488dbc20ab6","sourcePort":"stored","targetId":"95c030a5-ed16-5159-fe2c-2211d621c05c","targetPort":"Done"},{"sourceId":"e9b3244f-5bbd-1312-8c86-515ee056b452","sourcePort":"out-loggedIn","targetId":"95c030a5-ed16-5159-fe2c-2211d621c05c","targetPort":"Logged In"},{"sourceId":"e9b3244f-5bbd-1312-8c86-515ee056b452","sourcePort":"out-Done","targetId":"e0196949-22e1-0d3a-69a5-a488dbc20ab6","targetPort":"store"}],"ports":[{"name":"Done","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"Logged In","type":"boolean","plug":"output","index":2}],"roots":[]}]